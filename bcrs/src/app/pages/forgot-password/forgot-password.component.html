<!--=========================
Name: Brittany Dockter, Justin Singleton, Gabriel Sanchez
Date: April 19, 2020
Assignment: forgot password page
Description: html build for forgot password form
==========================-->

<div fxLayout="column" style="margin-top: 8%">
  <mat-card fxFlex style="width: 65%; margin-left: 18%; margin-top: 5%" class="mat-elevation-z8">
      <mat-card-title style="text-align: center; font-weight: lighter;">Forgot Password</mat-card-title>

      <mat-card *ngIf="errorMessage" class="mat-elevation-z0" style="width: 75%">
          <mat-card-content>
              <div class="msg-error" style="font-weight: lighter;">
                  {{errorMessage}}
              <br />
              </div>
          </mat-card-content>
      </mat-card>
      <!-- setting up form to receive data -->
      <form id="forgotForm" [formGroup]="forgotForm">
        <mat-card-content fxLayout="column" fxLayoutGap="10px">
          <mat-horizontal-stepper linear>
              <mat-step fxFlex formGroupName="username">

                  <ng-template matStepLabel>Username</ng-template>

                  <mat-form-field>
                    <input
                    type="text"
                    matInput
                    formControlName="username"
                    placeholder="Username"/>
                  </mat-form-field>

                  <br/><br/><br/>
                  <div fxLayoutAlign="end" fxFlex>
                      <button mat-raised-button color="accent" (click)='getQuestions()' matStepperNext>Next</button>
                  </div>

              </mat-step>

              <mat-step fxFlex formGroupName="securityQuestions">
                  <ng-template matStepLabel>Answer the Security Questions</ng-template>

                  <mat-list>
                    <mat-list-item>
                        <mat-label *ngFor="let question of securityQuestions">
                          {{question.text}}
                        </mat-label>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <mat-form-field fxFlex>
                            <input matInput
                                formControlName="answerToSecurityQuestion1"
                                placeholder="Answer 1"/>
                        </mat-form-field>
                    </mat-list-item>

                    <mat-list-item>
                        <mat-label *ngFor="let question of securityQuestions">
                          {{question.text}}
                        </mat-label>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <mat-form-field fxFlex>
                            <input matInput
                                formControlName="answerToSecurityQuestion2"
                                placeholder="Answer 2"/>
                        </mat-form-field>
                    </mat-list-item>

                    <mat-list-item>
                        <mat-label *ngFor="let question of securityQuestions">
                            {{question.text}}
                        </mat-label>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <mat-form-field fxFlex style="padding-left: 15px">
                            <input matInput
                                formControlName="answerToSecurityQuestion3"
                                placeholder="Answer 3"/>
                        </mat-form-field>
                    </mat-list-item>
                </mat-list>

                <div fxLayoutAlign="end">
                  <button mat-raised-button color="accent" matStepperPrevious>Back</button>
                  <button mat-raised-button color="accent" (click)='verifyAnswers()' matStepperNext>Next</button>
                </div>

              </mat-step>

              <mat-step fxFlex formGroupName="password">
                  <mat-form-field fxFlex>
                      <input matInput
                          type="password"
                          formControlName="password"
                          placeholder="New password"/>
                  </mat-form-field>

                  <div fxLayoutAlign="end">
                    <button mat-raised-button color="accent" matStepperPrevious>Back</button> &nbsp;
                    <button
                        mat-raised-button
                        (click)="resetPassword()"
                        color="accent"
                        type="submit">Submit
                    </button>
                </div>
              </mat-step>
          </mat-horizontal-stepper>
          <a routerLink="/signin" class="return">Return</a>
        </mat-card-content>
      </form>

  </mat-card>
</div>
